# Chrome Web Store Publishing Setup

## Quick Start

Run this command - it will guide you through the entire setup:

```bash
npx wxt@latest submit init
```

This will:
1. Ask for your extension ID (already configured: `molpfdakehebpkaecfdpndakphebjjpp`)
2. Guide you to create OAuth credentials in Google Cloud Console
3. Help you get the Client ID, Client Secret, and Refresh Token
4. Save everything to `.env.submit`

## Publishing

### Full Build and Publish

```bash
npm run publish
```

This will:
1. Build the extension (`npm run build`)
2. Create a zip file (`npm run zip`)
3. Upload to Chrome Web Store and auto-publish

### Just Submit (if already built and zipped)

```bash
npm run submit
```

## Manual Steps (if needed)

### 1. Google Cloud Console Setup

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project
3. Enable **Chrome Web Store API**:
   - Click "Enable APIs and Services"
   - Search "Chrome Web Store API"
   - Enable it

### 2. Create OAuth Credentials

1. Go to "APIs & Services" > "Credentials"
2. Click "Create Credentials" > "OAuth client ID"
3. Application type: **Desktop app**
4. Save Client ID and Client Secret

### 3. Get Refresh Token

Use the WXT init command (recommended) or visit:
```
https://accounts.google.com/o/oauth2/auth?response_type=code&scope=https://www.googleapis.com/auth/chromewebstore&client_id=YOUR_CLIENT_ID&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

## Files
- **`.env.submit`** - Generated by WXT with `CHROME_*` prefixed variables

## Notes

- ‚úÖ Extension will be published automatically with `--auto-publish` flag
- ‚ö†Ô∏è Remove `--auto-publish` from package.json if you want manual approval
- üìù The zip file location: `.output/chrome-mv3.zip`

## Troubleshooting

### "Command not found: webstore"
```bash
npm install -D chrome-webstore-upload-cli
```

### "Authentication failed"
- Verify credentials in `.env` are correct
- Make sure OAuth app type is **Desktop app** (not Web app)
- Try regenerating refresh token with `npx wxt@latest submit init`

### "Extension not found"
- Check `EXTENSION_ID` matches your Chrome Web Store extension

### "Rate limit exceeded"
- Chrome Web Store has publishing limits
- Wait and try again later

## CI/CD (GitHub Actions)

Add secrets to GitHub repository:
- `EXTENSION_ID`
- `CLIENT_ID`
- `CLIENT_SECRET`
- `REFRESH_TOKEN`

Create `.github/workflows/publish.yml`:

```yaml
name: Publish to Chrome Web Store

on:
  push:
    tags:
      - 'v*'

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Publish
        run: npm run publish
        env:
          EXTENSION_ID: ${{ secrets.EXTENSION_ID }}
          CLIENT_ID: ${{ secrets.CLIENT_ID }}
          CLIENT_SECRET: ${{ secrets.CLIENT_SECRET }}
          REFRESH_TOKEN: ${{ secrets.REFRESH_TOKEN }}
```


